{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack://project2/./src/constants.js","webpack://project2/./src/listeners.js","webpack://project2/./src/render.js","webpack://project2/./src/services.js","webpack://project2/./src/state.js","webpack://project2/webpack/bootstrap","webpack://project2/webpack/runtime/define property getters","webpack://project2/webpack/runtime/hasOwnProperty shorthand","webpack://project2/webpack/runtime/make namespace object","webpack://project2/./src/chat.js"],"sourcesContent":["export const SERVER = {\n    AUTH_MISSING: 'auth-missing',\n    AUTH_INSUFFICIENT: 'auth-insufficient',\n    REQUIRED_USERNAME: 'required-username',\n    REQUIRED_TASK: 'required-task',\n    TASK_MISSING: 'noSuchId', // Someone was inconsistent!\n  };\n  \n  export const CLIENT = {\n    NETWORK_ERROR: 'networkError',\n    NO_SESSION: 'noSession',\n  };\n  \n  export const MESSAGES = {\n    // The [] below uses the variable value as the key\n    [CLIENT.NETWORK_ERROR]: 'Trouble connecting to the network.  Please try again',\n    // Here we use 'dog' to simulate a bad password\n    [SERVER.AUTH_INSUFFICIENT]: 'Your username/password combination does not match any records, please try again.',\n    [SERVER.REQUIRED_USERNAME]: 'Please enter a valid (letters and/or numbers) username',\n    [SERVER.REQUIRED_TASK]: 'Please enter the task to do',\n    default: 'Something went wrong.  Please try again',\n  };","import {\n    fetchLogin,\n    fetchLogout\n  } from './services';\n  import {\n    waitOnUsers,\n    setUsers,\n    waitOnMessages,\n    setMessages,\n    addMessage,\n    setError,\n    login,\n    logout\n  } from './state';\n  import {renderHomePage, renderLoginPage} from './render';\n  \n  export function addListenerToLogin({ state,  rootEl }) {\n    // Using 'submit' so we can get both submit via button-click and by \"enter\"\n    rootEl.addEventListener('click', (e) => {\n      if(!e.target.classList.contains('login-to-submit')) {\n        return;\n      }\n  \n      const username = rootEl.querySelector('.login-to-send').value;\n    //   waitOnUsers();\n    //   waitOnMessages();\n      renderHomePage({ state, rootEl }); // show loading state\n      fetchLogin( username )\n      .then( todos => {\n        login(username);\n        // setUsers(users);\n        // setMessages(messages);\n        renderHomePage({ state, rootEl });\n      })\n      .catch( err => {\n        setError(err?.error || 'ERROR'); // Ensure that the error ends up truthy\n        renderLoginPage({ state, rootEl });\n      });\n  \n    });\n  }\n  \n  export function addListenerToLogout({ state, rootEl }) {\n    rootEl.addEventListener('click', (e) => {\n      if(!e.target.classList.contains('logout-to-submit')) {\n        return;\n      }\n      logout();\n      renderHomePage({ state, rootEl });\n      fetchLogout() // We don't really care about results\n      .catch( err => {\n        setError(err?.error || 'ERROR'); // Ensure that the error ends up truthy\n        renderLoginPage({ state, rootEl });\n      });\n    });\n  }\n\n  export function addListenerToOutgoing({ state,  rootEl }) {\n    // Using 'submit' so we can get both submit via button-click and by \"enter\"\n    rootEl.addEventListener('click', (e) => {\n      if(!e.target.classList.contains('outgoing-to-submit')) {\n        return;\n      }\n  \n      const message = rootEl.querySelector('.outgoing-to-send').value;\n      console.log(message);\n    //   waitOnUsers();\n    //   waitOnMessages();\n    //   renderHomePage({ state, rootEl }); // show loading state\n    //   fetchLogin( username )\n    //   .then( todos => {\n    //     login(username);\n    //     // setUsers(users);\n    //     // setMessages(messages);\n    //     renderHomePage({ state, rootEl });\n    //   })\n    //   .catch( err => {\n    //     setError(err?.error || 'ERROR'); // Ensure that the error ends up truthy\n    //     renderLoginPage({ state, rootEl });\n    //   });\n  \n    });\n  }","function generateHomePageHtml(state) {\n    return `\n      <div class=\"home\">\n        <p class=\"user-greeting\">Hello <span class=\"user-title\">${state.username}</span></p>\n        <div class=\"logout-form\">\n          <button type=\"submit\" class=\"logout-to-submit\">Logout</button>\n        </div>\n        ${generateMessageListHtml(state)}\n        ${generateUserListHtml(state)}\n        ${generateOutgoingHtml()}\n      </div>\n    `;\n  }\n\n  function generateMessageListHtml (state) {\n    return `<ol class=\"messages\">` +\n    state.messages.map( msg => `\n      <li>\n        <div class=\"message\">\n          <div class=\"sender-info\">\n            <img class=\"avatar\" alt=\"avatar of ${msg.username}\" src=\"images/avatar-${msg.username}.jpg\"/>\n            <span class=\"username\">${msg.username}</span>\n          </div>\n          <p class=\"message-text\">${msg.message}</p>\n        </div>\n      </li>\n    `).join('') +\n    `</ol>`;\n  }\n  \n  function generateUserListHtml(state) {\n    return `<ul class=\"users\">` +\n    Object.entries(state.users).filter(([username, value]) => value?.isLoggedIn).map( ([username, value]) => `\n      <li>\n        <div class=\"user\">\n          <span class=\"username\">${username}</span>\n        </div>\n      </li>\n    `).join('') +\n    `</ul>`;\n  }\n\n  function generateOutgoingHtml() {\n    return `<div class=\"outgoing\">\n      <div class=\"outgoing-form\">\n        <input type=\"text\" name=\"text\" class=\"outgoing-to-send\" value=\"\" placeholder=\"Enter message to send\"/>\n        <button type=\"submit\" class=\"outgoing-to-submit\">Send</button>\n      </div>\n    </div>`;\n  }\n\n  function generateLoginPageHtml(state) {\n    return `\n      <div class=\"login\">\n        <p class=\"login-greeting\">Welcome to JS Chat!</p>\n        <div class=\"login-main\">\n          ${state.error ? `<p class=\"login-message\">${state.error}</p>` : \"\"}\n          <div class=\"login-form\">\n            <label class=\"login-label\">\n              <span>Username:</span>\n              <input type=\"text\" name=\"username\" class=\"login-to-send\" value=\"\" placeholder=\"Enter your username\"/>\n            </label>\n            <button type=\"submit\" class=\"login-to-submit\">Login</button>\n          </div>\n        </div>\n      </div>\n    `;\n  }\n  \n  export function renderHomePage({state,rootEl}) {\n    const homePageHtml = generateHomePageHtml(state);\n    rootEl.innerHTML = `${homePageHtml}`;\n  }\n  \n  export function renderLoginPage({state, rootEl}) {\n    const loginPageHtml = generateLoginPageHtml(state);\n    rootEl.innerHTML = `${loginPageHtml}`;\n  }","export function fetchLogin(username) {\n  return fetch('/api/v1/session', {\n    method: 'POST',\n    headers: new Headers({\n      'content-type': 'application/json'\n    }),\n    body: JSON.stringify({ username }),\n  })\n  .catch( () => Promise.reject({ error: 'networkError' }) )\n  .then( response => {\n    if (response.ok) {\n      return response.json();\n    }\n    return response.json()\n    .catch( error => Promise.reject({ error }) )\n    .then( err => Promise.reject(err) );\n  });\n}\n\nexport function fetchLogout() {\n  return fetch('/api/v1/session', {\n    method: 'DELETE',\n  })\n  .catch( () => Promise.reject({ error: 'networkError' }) )\n  .then( response => {\n    if (response.ok) {\n      return response.json();\n    }\n    return response.json()\n    .catch( error => Promise.reject({ error }) )\n    .then( err => Promise.reject(err) );\n  });\n}\n\nexport function fetchSession() {\n  return fetch('/api/v1/session', {\n    method: 'GET',\n  })\n  .catch( () => Promise.reject({ error: 'networkError' }) )\n  .then( response => {\n    if (response.ok) {\n      return response.json();\n    }\n    return response.json()\n    .catch( error => Promise.reject({ error }) )\n    .then( err => Promise.reject(err) );\n  });\n}","import { MESSAGES } from './constants';\n\nconst state = {\n    username: '',\n    isLoggedIn: false,\n    isLoginPending: true, // We start with our login status unknown\n    isMessagesPending: false,\n    isUsersPending: false,\n    error: '',\n    messages: [],\n    users: {}\n  };\n\n  export function waitOnLogin() {\n    state.isLoggedIn = false;\n    state.isLoginPending = true;\n    state.username = '';\n    state.error = '';\n  }\n  \n  export function login(username) {\n    state.isLoggedIn = true;\n    state.isLoginPending = false;\n    state.username = username;\n    state.error = '';\n  }\n  \n  export function logout() {\n    state.isLoggedIn = false;\n    state.isLoginPending = false;\n    state.username = '';\n    state.error = '';\n  }\n\n  export function waitOnUsers() {\n    state.users = {};\n    state.isUsersPending = true;\n    state.error = '';\n  }\n  \n  export function setUsers(users) {\n    state.users = users;\n    state.isUsersPending = false;\n    state.error = '';\n  }\n\n  export function waitOnMessages() {\n    state.messages = [];\n    state.isMessagesPending = true;\n    state.error = '';\n  }\n  \n  export function setMessages(messages) {\n    state.messages = messages;\n    state.isMessagesPending = false;\n    state.error = '';\n  }\n\n  \n  export function addMessage(message) {\n    state.messages.push(message);\n    state.error = '';\n  }\n  \n  export function setError(error) {\n    console.log(error);\n    if(!error) {\n      state.error = '';\n      return;\n    }\n    state.error = MESSAGES[error] || MESSAGES.default;\n  }\n  \n  export default state;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import {renderHomePage, renderLoginPage} from './render'; // Offer the render methods to generate HTML\nimport state from './state'; // 'state' holds the user's state\nimport {fetchSession, fetchLogin, fetchLogout} from './services'; // Offer fetch() calls to communicate with the server\n// import MESSAGES from './constants'; // 'MESSAGES' translate the server's Error Messages to user friendly\nimport { MESSAGES, SERVER, CLIENT } from './constants';\n\nimport {\n    addListenerToLogin,\n    addListenerToLogout,\n    addListenerToOutgoing\n  } from './listeners';\n\nconst rootEl = document.querySelector('.root');\n\naddListenerToLogin({ state,  rootEl });\naddListenerToLogout({ state,  rootEl });\naddListenerToOutgoing({ state,  rootEl });\n\n\nfunction load() {\n\n    // Check for an existing session\n    fetchSession()\n    // .then( res => {\n    //     // If there is a session, call to get the stored word\n    //     return fetchWord();\n    // })\n    .then((res) => {\n        // If the call to get stored word is successful, update the user's state and show the Word View  \n\n        renderHomePage({state, rootEl});\n    })\n    .catch( err => {\n        // If there is not an existing session or the call to get stored word is unsuccessful, show Login Page\n        renderLoginPage({state, rootEl});\n    });\n\n}\n\n/* Runs on load */\nload();"],"names":["SERVER","AUTH_MISSING","AUTH_INSUFFICIENT","REQUIRED_USERNAME","REQUIRED_TASK","TASK_MISSING","CLIENT","NETWORK_ERROR","NO_SESSION","MESSAGES","_MESSAGES","_defineProperty","fetchLogin","fetchLogout","waitOnUsers","setUsers","waitOnMessages","setMessages","addMessage","setError","login","logout","renderHomePage","renderLoginPage","addListenerToLogin","_ref","state","rootEl","addEventListener","e","target","classList","contains","username","querySelector","value","then","todos","err","error","addListenerToLogout","_ref2","addListenerToOutgoing","_ref3","message","console","log","generateHomePageHtml","concat","generateMessageListHtml","generateUserListHtml","generateOutgoingHtml","messages","map","msg","join","Object","entries","users","filter","_slicedToArray","isLoggedIn","_ref4","generateLoginPageHtml","_ref5","homePageHtml","innerHTML","_ref6","loginPageHtml","fetch","method","headers","Headers","body","JSON","stringify","Promise","reject","response","ok","json","fetchSession","isLoginPending","isMessagesPending","isUsersPending","waitOnLogin","push","document","load","res"],"sourceRoot":""}